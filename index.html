<!DOCTYPE html>
	<head>
		<meta charset="utf-8">
		<title>Asteroids</title>
		<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="styles.css">
		<script src="processing.js"></script>
	</head>
	<body>
		<header>
			// Play/pause thrust sound based on the Processing sketch's `forward` boolean.
			// The previous code referenced `accelerate` which is not in the page scope.
			// We poll the Processing instance and play/stop the sound accordingly.
			var sound1 = new Audio('thrust.wav');
			sound1.loop = true;
			var procInstance = null;
			function checkThrustSound() {
			  if (!procInstance) {
			    // Try to obtain the Processing instance for the canvas
			    if (typeof Processing !== 'undefined' && Processing.getInstanceById) {
			      procInstance = Processing.getInstanceById('AsteroidsGame');
			    }
			  }
			  var thrusting = false;
			  if (procInstance) {
			    // The sketch uses `forward` to track accelerating/thrusting
			    try {
			      thrusting = !!procInstance.forward;
			    } catch(e) {
			      thrusting = false;
			    }
			  }
			  if (thrusting) {
			    if (sound1.paused) {
			      // play() returns a promise in some browsers; ignore result
			      sound1.play();
			    }
			  } else {
			    if (!sound1.paused) {
			      sound1.pause();
			      sound1.currentTime = 0;
			    }
			  }
			}
			// Poll at 100ms; this is lightweight and reliable even if the Processing instance isn't ready immediately
			setInterval(checkThrustSound, 100);
	    </footer>
		<script>
			var sound1 = new Audio('thrust.wav');
			var playSound = function() {
			    if(accelerate){
			       sound1.play();
			    }
			};
			
			playSound();
			
		</script>
	</body>
</html>
